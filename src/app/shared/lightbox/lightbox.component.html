<div *ngIf="visible" class="lightbox">
    <div class="overlay" (click)="closeAll()"></div>

    <div class="viewer" role="dialog" aria-modal="true">

        <button class="close-btn" (click)="closeAll()" aria-label="Zamknij galerię">
            ✕
        </button>

        <button class="nav prev" (click)="prev()" aria-label="Poprzednie">◀</button>

        <img
                *ngIf="images.length > 1"
                class="side-preview left"
                [src]="thumbs[prevIndex]"
                (click)="prev()"
                alt=""
        />

        <div class="main">
            <img
                    class="main-image"
                    [src]="images[current]"
                    [alt]="descriptions[current] || title"
                    (touchstart)="onTouchStart($event)"
                    (touchend)="onTouchEnd($event)"
                    (click)="onImageTap($event)"
            />

            <div class="caption">
                {{ descriptions[current] || '' }}
            </div>

            <div class="thumbs">
                <img
                        *ngFor="let thumb of thumbs; let i = index"
                        [src]="thumb"
                        [class.active]="i === current"
                        (click)="select(i)"
                        [alt]="descriptions[i] || ''"
                />
            </div>
        </div>

        <img
                *ngIf="images.length > 1"
                class="side-preview right"
                [src]="thumbs[nextIndex]"
                (click)="next()"
                alt=""
        />

        <button class="nav next" (click)="next()" aria-label="Następne">▶</button>
    </div>
</div>
